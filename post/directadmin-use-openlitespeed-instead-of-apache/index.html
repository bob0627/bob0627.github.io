<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DirectAdminé¢æ¿å¦‚ä½•ä½¿ç”¨OpenLiteSpeedæ›¿ä»£é»˜è®¤çš„Apache | alect</title>
<link rel="shortcut icon" href="https://git.69cdn.com/favicon.ico?v=1582789787707">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://git.69cdn.com/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="DirectAdminé¢æ¿å¦‚ä½•ä½¿ç”¨OpenLiteSpeedæ›¿ä»£é»˜è®¤çš„Apache | alect - Atom Feed" href="https://git.69cdn.com/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="é¢„è®¡å°†å†™æˆä¸€ä¸ªç³»åˆ—æ–‡ç« ï¼Œæœ¬æ–‡ä¸ºæ­¤ç³»åˆ—çš„ç¬¬ä¸€ç« ï¼š
ç¬¬ä¸€ç« ï¼šDirectAdminé¢æ¿å¦‚ä½•ä½¿ç”¨OpenLiteSpeedæ›¿ä»£é»˜è®¤çš„Apache
ç¬¬äºŒç« ï¼šå¦‚æœOpenLiteSpeedä½¿ç”¨äº†CloudFlareç­‰CDNå¦‚ä½•æ˜¾ç¤ºè®¿å®¢çš„çœŸå®IP
ç¬¬ä¸‰..." />
    <meta name="keywords" content="DirectAdmin,OpenLiteSpeed,Apache" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://git.69cdn.com">
  <img class="avatar" src="https://git.69cdn.com/images/avatar.png?v=1582789787707" alt="">
  </a>
  <h1 class="site-title">
    alect
  </h1>
  <p class="site-description">
    æ¸©æ•…è€ŒçŸ¥æ–°
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              DirectAdminé¢æ¿å¦‚ä½•ä½¿ç”¨OpenLiteSpeedæ›¿ä»£é»˜è®¤çš„Apache
            </h2>
            <div class="post-info">
              <span>
                2020-02-26
              </span>
              <span>
                6 min read
              </span>
              
                <a href="https://git.69cdn.com/tag/7xx8kWY3v/" class="post-tag">
                  # DirectAdmin
                </a>
              
                <a href="https://git.69cdn.com/tag/qlKzDKtWtC/" class="post-tag">
                  # OpenLiteSpeed
                </a>
              
                <a href="https://git.69cdn.com/tag/Lgwv7Disj-/" class="post-tag">
                  # Apache
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://git.69cdn.com/post-images/directadmin-use-openlitespeed-instead-of-apache.png" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <p>é¢„è®¡å°†å†™æˆä¸€ä¸ªç³»åˆ—æ–‡ç« ï¼Œæœ¬æ–‡ä¸ºæ­¤ç³»åˆ—çš„ç¬¬ä¸€ç« ï¼š<br>
ç¬¬ä¸€ç« ï¼šDirectAdminé¢æ¿å¦‚ä½•ä½¿ç”¨OpenLiteSpeedæ›¿ä»£é»˜è®¤çš„Apache<br>
ç¬¬äºŒç« ï¼šå¦‚æœOpenLiteSpeedä½¿ç”¨äº†CloudFlareç­‰CDNå¦‚ä½•æ˜¾ç¤ºè®¿å®¢çš„çœŸå®IP<br>
ç¬¬ä¸‰ç« ï¼šä½¿ç”¨OpenLiteSpeedåå¦‚ä½•å¼€å¯HTTP/2 / HTTP/3 / SPDY / QUICçš„æ”¯æŒ<br>
ç¬¬å››ç« ï¼šDirectAdminåå°å®‰è£…[LiteSpeedæ§åˆ¶æ’ä»¶]ä¸€é”®å®‰è£…ç¼“å­˜æ’ä»¶</p>
<p>é¦–å…ˆæ™®åŠä¸‹<a href="https://openlitespeed.org/">OpenLiteSpeed</a>ï¼ˆä»¥ä¸‹ç®€ç§°OLSï¼‰ç›¸å…³çŸ¥è¯†ï¼ŒOLSæ˜¯<a href="https://www.litespeedtech.com/">LiteSpeed Technologies Inc.</a>å‡ºå“çš„ä¸€æ¬¾å¼€æºçš„ç½‘é¡µæœåŠ¡å™¨ï¼Œè¯¥å…¬å¸å‡ºå“çš„å•†ä¸šç‰ˆWebæœåŠ¡å™¨<a href="https://www.litespeedtech.com/products/litespeed-web-server">LiteSpeed Web Server, Enterprise edition</a>ï¼ˆç®€ç§°LSWSï¼‰æ€§èƒ½è¶…å¼ºï¼Œåœ¨å„ç§æµ‹è¯•å’Œå®é™…ä½¿ç”¨ä¸­éƒ½æ˜¯å‡ ä¹éƒ½æ˜¯åœ°è¡¨æœ€å¼ºçš„å­˜åœ¨ï¼Œä»¥æœ€å¸¸è§çš„WordPresså¹³å°ä¸ºä¾‹ï¼Œä½¿ç”¨LSWSæœåŠ¡å™¨å¹¶ä¸”å¼€å¯ä»–ä»¬ä¸“é—¨é’ˆå¯¹WPå¼€å‘çš„ç¼“å­˜ä¼˜åŒ–æ’ä»¶<a href="https://www.litespeedtech.com/products/cache-plugins">LSCache for WP</a>åï¼Œ<a href="https://www.litespeedtech.com/benchmarks/wordpress">æ¯ç§’å¤„ç†èƒ½åŠ›è¿œè¶…å…¶ä»–æ’ä»¶</a>ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<figure data-type="image" tabindex="1"><img src="https://git.69cdn.com/post-images/1582781686331.png" alt="" loading="lazy"></figure>
<p>å¹¶ä¸”æ— è®ºæ˜¯å•†ä¸šç‰ˆè¿˜æ˜¯å¼€æºç‰ˆéƒ½æ”¯æŒå¾ˆå¤šæœ€æ–°çš„æŠ€æœ¯ï¼Œæ¯”å¦‚HTTP/2 / HTTP/3 / SPDY / QUICçš„æ”¯æŒï¼Œè®©ç½‘ç«™æ‰“å¼€é£å¿«ã€‚</p>
<p>ä½†æ˜¯å•†ä¸šç‰ˆLSWSçš„æœ€å¤§ç¼ºç‚¹<a href="https://www.litespeedtech.com/products/litespeed-web-server/lsws-pricing">å°±æ˜¯è´µğŸ™</a>ï¼Œæˆ‘ä»¬è¿™é‡Œä¸è€ƒè™‘å•†ä¸šç‰ˆã€‚å¥½åœ¨è¯¥å…¬å¸ä¹Ÿå‡ºäº†ä¸€ä¸ªå¼€æºç‰ˆçš„OLSï¼Œç›¸ä¿¡å¾ˆå¤šäººä¹Ÿå®‰è£…ä½“éªŒè¿‡ï¼Œä½†æ˜¯OLSåœ¨ä½¿ç”¨ä¸Šéå¸¸ä¸å‹å¥½ï¼Œä¸LSWSå•†ä¸šç‰ˆç›¸æ¯”è¾ƒè€Œè¨€ï¼Œé˜‰å‰²äº†æœ€é‡è¦çš„åŠŸèƒ½ï¼šå®Œå…¨å…¼å®¹Apacheçš„httpd.confæ–‡ä»¶ä»¥åŠ.htaccessæ–‡ä»¶ã€‚å¼€æºç‰ˆä¸å•†ä¸šç‰ˆçš„åŒºåˆ«è§<a href="https://www.litespeedtech.com/products/litespeed-web-server/editions">å®˜æ–¹é¡µé¢</a>ï¼Œå¦‚ä¸‹å›¾çº¢åœˆä½ç½®OLSç¼ºå°‘äº†ä¸¤ä¸ªDirectAdminæœ€éœ€è¦çš„åŠŸèƒ½ã€‚</p>
<figure data-type="image" tabindex="2"><img src="https://git.69cdn.com/post-images/1582781965857.png" alt="" loading="lazy"></figure>
<p>LSWSå•†ä¸šç‰ˆçš„é…ç½®æ–‡ä»¶å¯ä»¥å…¼å®¹Apacheï¼Œè€ŒOLSçš„é…ç½®æ–‡ä»¶ä½¿ç”¨ç§æœ‰æ ¼å¼ï¼Œè¿™å°±å¯¼è‡´äº†ä¸€ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼Œç°æœ‰æµè¡Œçš„WebæœåŠ¡å™¨æ“ä½œé¢æ¿å¦‚cPanelå’ŒDirectAdminä»¥åŠPleskç­‰éƒ½æ˜¯åŸºäºApacheï¼Œä¸€äº›å†…ç½®çš„è„šæœ¬ä¹Ÿæ˜¯åŸºäºApacheæ ¼å¼è¿›è¡Œå¤„ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹‹å‰è¿˜æ²¡æœ‰åŠæ³•åœ¨CPæˆ–è€…DAä¸Šå®Œç¾ä½“éªŒå®‰è£…å…è´¹å¹¶ä¸”å¼€æºçš„OLSç½‘é¡µæœåŠ¡å™¨ã€‚</p>
<p>åœ¨DirectAdminæ›´æ–°åˆ°1.57ç‰ˆæœ¬ä»¥åï¼ˆ<a href="https://help.directadmin.com/item.php?id=2095">ç‰ˆæœ¬æ¨å‡ºæ—¶é—´å¤§çº¦åœ¨2019å¹´çš„4æœˆåº•</a>ï¼‰ï¼Œå¼€å§‹æ”¯æŒOLSçš„å®‰è£…ï¼Œä½†æ˜¯å½“æ—¶æˆ‘åœ¨ä½“éªŒæ—¶æœ‰å¾ˆå¤šè«åå…¶å¦™çš„bugï¼Œåæ¥ä¹Ÿå°±æ²¡ç»§ç»­ç”¨ã€‚è¿™ä¸¤å¤©å› ä¸ºæ›´æ¢æœåŠ¡å™¨ï¼Œé‡æ–°å®‰è£…äº†DirectAdminï¼Œä¼˜åŒ–æœåŠ¡å™¨çš„æ—¶å€™å‘ç°DAå®˜æ–¹é€šè¿‡åŠªåŠ›ï¼Œå·²ç»å¾ˆå¥½çš„è§£å†³äº†ä¸Šé¢æåˆ°çš„å…¼å®¹æ€§é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿå°±å°è¯•å®‰è£…äº†ä¸€ä¸‹å¼€æºçš„OLSï¼Œä»¥ä¸‹ä¸ºå®‰è£…OLSæ›¿æ¢Apacheçš„è¿‡ç¨‹ã€‚</p>
<p>è¦æ±‚ï¼š<strong>DAä¸€å®šå‡çº§åˆ°æœ€æ–°ç‰ˆ</strong>ï¼ˆ<a href="https://help.directadmin.com/item.php?id=2095">1.57ä»¥ä¸Šå°±æ”¯æŒäº†</a>ï¼Œä½†æ˜¯æˆ‘åŠä½ ä¸æ˜¯æœ€æ–°ç‰ˆåˆ«å°è¯•ï¼‰å¹¶ä¸”å°†DirectAdminå†…ç½®çš„<a href="https://help.directadmin.com/index.php?topic=29">Custombuild</a>ä¹Ÿå‡çº§åˆ°<a href="https://help.directadmin.com/item.php?id=555">2.0æœ€æ–°ç‰ˆ</a>ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="language-javascript">cd /usr/local/directadmin
mv custombuild custombuild_1.x
wget -O custombuild.tar.gz http://files.directadmin.com/services/custombuild/2.0/custombuild.tar.gz
tar xvzf custombuild.tar.gz
cd custombuild
./build
</code></pre>
<p>æ ¹æ®<a href="https://help.directadmin.com/item.php?id=2095">å®˜æ–¹æ–‡æ¡£</a>çš„åšæ³•ï¼Œåœ¨custombuildé‡Œé¢å°†webserverè®¾ç½®ä¸ºOpenLiteSpeedï¼Œ<strong>åŒæ—¶å°†phpçš„æ¨¡å¼æ”¹ä¸ºOLSæ‰æ”¯æŒçš„lsphp</strong>ï¼Œç„¶åå¼€å§‹ç¼–è¯‘OLSä»¥åŠlsphpï¼Œæœ€åé‡å†™DAçš„é…ç½®æ–‡ä»¶ï¼Œç¼–è¯‘è¿‡ç¨‹æ¯”è¾ƒä¹…ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚</p>
<pre><code class="language-javascript">./build update
./build set webserver openlitespeed
./build set mod_ruid2 no
./build set php1_mode lsphp
./build openlitespeed
./build php n
./build rewrite_confs
</code></pre>
<p>åŸºæœ¬ä¸Šå¦‚æœä½ åªéœ€è¦ä¸€ä¸ªphpç‰ˆæœ¬ï¼Œé‚£ä½ çœ‹åˆ°è¿™é‡Œå°±è¡Œäº†ã€‚<br>
åƒæˆ‘å®‰è£…äº†4ä¸ªç‰ˆæœ¬çš„phpï¼Œæ‰€ä»¥æˆ‘çš„æ“ä½œå¦‚ä¸‹ï¼ˆ<a href="https://help.directadmin.com/item.php?id=2094">å¦‚ä½•åœ¨DirectAdminä¸­å®‰è£…å¤šä¸ªç‰ˆæœ¬çš„PHP</a>ï¼‰ï¼š</p>
<pre><code class="language-javascript">cd /usr/local/directadmin/custombuild
./build update
./build set webserver openlitespeed
./build set mod_ruid2 no
./build set php1_release 7.3
./build set php2_release 7.2
./build set php3_release 7.1
./build set php4_release 5.6
./build set php1_mode lsphp
./build set php2_mode lsphp
./build set php3_mode lsphp
./build set php4_mode lsphp
./build php n
./build rewrite_confs
</code></pre>
<p>æˆ‘è¿™é‡ŒæŒ‡å®šäº†è¦å®‰è£…çš„4ä¸ªphpçš„ç‰ˆæœ¬å·ï¼Œå¹¶ä¸”è®¾å®šæ¨¡å¼éƒ½æ˜¯lsphpï¼Œæ‰§è¡Œå®Œå‘½ä»¤åï¼Œç»è¿‡æ¼«é•¿ç­‰å¾…ï¼Œçœ‹åˆ°å¦‚ä¸‹å›¾è¿™æ ·çš„æç¤ºï¼Œå®‰è£…ç»“æŸäº†ã€‚</p>
<figure data-type="image" tabindex="3"><img src="https://git.69cdn.com/post-images/1582780222153.png" alt="" loading="lazy"></figure>
<p>å‰©ä¸‹çš„ä¸€æ­¥ä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€æ­¥ï¼Œå› ä¸ºå¼€æºç‰ˆçš„OLSä¸ºäº†è·Ÿå•†ä¸šç‰ˆåšå‡ºåŒºåˆ«ï¼Œ<strong>ååˆ†æ¶å¿ƒçš„é™åˆ¶äº†å®æ—¶è¯»å–.htaccessæ–‡ä»¶çš„åŠŸèƒ½ï¼Œä»…ä»…åœ¨OLSå¯åŠ¨çš„æ—¶å€™è¯»å–ä¸€æ¬¡.htaccess</strong>ï¼Œé€¼ç€å¤§å®¶ç”¨å•†ä¸šç‰ˆã€‚æ¥ä¸‹æ¥è¿™ä¸€æ­¥æ“ä½œå°±æ˜¯è®©ç³»ç»Ÿå®šæ—¶æ‰«ææ‰€æœ‰ç”¨æˆ·ç½‘ç«™æ ¹ç›®å½•ä¸‹çš„.htaccessæ–‡ä»¶ï¼Œå¦‚æœå‘ç°æœ‰å˜åŠ¨å°±è‡ªåŠ¨é‡å¯OLSï¼Œä»¥æ­¤æ¥è§„é¿é™åˆ¶ã€‚</p>
<p>æˆ‘ä»¬åˆ©ç”¨ç³»ç»Ÿçš„cronjobåŠŸèƒ½åœ¨ç³»ç»Ÿæ–°å¢ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œè¿›å…¥/etc/cron.d/ç›®å½•ï¼Œæ–°å»ºæ–‡ä»¶åå­—ä¸ºopenlitespeed_htaccess_scanï¼ŒæŠŠä¸‹é¢çš„ä»£ç å†™å…¥æ–‡ä»¶å³å¯ã€‚<br>
ä»¥ä¸‹ä»£ç æ„æ€ä¸ºæ¯ä¸‰åˆ†é’Ÿæ‰«ææ‰€æœ‰ç”¨æˆ·ç½‘ç«™æ ¹ç›®å½•ä»¥åŠæœ€æ·±2å±‚ç›®å½•ä¸‹çš„.htaccessæ–‡ä»¶æ˜¯å¦æœ‰å˜åŠ¨ï¼Œå¦‚æœå˜åŠ¨äº†å°±é‡å¯OLSæœåŠ¡ï¼Œä½ å¯ä»¥æŠŠ &quot;*/3&quot; æ”¹ä¸º5æˆ–è€…å…¶ä»–é—´éš”æ—¶é—´ï¼Œä¸éœ€è¦å¤ªå°ä»¥å…è´Ÿè½½è¿‡å¤§ã€‚&quot;maxdepth 2&quot;åŸºæœ¬ä¹Ÿå°±å¤Ÿäº†ï¼ŒæŸ¥æ‰¾çš„å±‚æ•°è¿‡å¤šä¼šæœ‰ä¸¥é‡æ€§èƒ½é—®é¢˜ã€‚</p>
<pre><code class="language-javascript">cd /etc/cron.d/
touch openlitespeed_htaccess_scan
echo &quot;*/3 * * * * root if ! find /home/*/domains/*/*_html/ -maxdepth 2 -type f -newer /usr/local/lsws/cgid -name '.htaccess' -exec false {} +; then /usr/local/lsws/bin/lswsctrl restart; fi&quot;&gt; touch openlitespeed_htaccess_scan
</code></pre>
<p>è‡³æ­¤ï¼Œå®‰è£…OpenLiteSpeedæ›¿æ¢Apacheçš„è¿‡ç¨‹å°±å·²ç»ç»“æŸï¼Œä½ ç°åœ¨å¯ä»¥å¼€å§‹ä½“éªŒäº†ã€‚<br>
ä¸‹ä¸€ç¯‡æ–‡ç« å†™â€œå¦‚æœOpenLiteSpeedä½¿ç”¨äº†CloudFlareç­‰CDNå¦‚ä½•æ˜¾ç¤ºè®¿å®¢çš„çœŸå®IPâ€çš„é—®é¢˜ã€‚</p>

              </div>
              <div class="toc-container">
                
              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://git.69cdn.com/post/hello-world/">
              <h3 class="post-title">
                hello world!
              </h3>
            </a>
          </div>
        

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '6798e82a6510fadca426',
    clientSecret: '09a52823ccaaaaade88bf38fd3cdddfe8b8dc6df',
    repo: 'bob0627.github.io',
    owner: 'bob0627',
    admin: ['bob0627'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://git.69cdn.com/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
